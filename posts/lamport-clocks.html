<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta content="initial-scale=1, width=device-width" name="viewport"/><link href="https://www.nigel-schuster.de/posts/lamport-clocks" rel="canonical"/><link href="/favicon/apple-touch-icon.png" sizes="180x180"/><link href="/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/favicon/site.webmanifest" rel="manifest"/><link color="#000000" href="/favicon/safari-pinned-tab.svg"/><link href="/favicon/favicon.ico" rel="icon"/><meta content="#000000" name="msapplication-TileColor"/><meta content="/favicon/browserconfig.xml" name="msapplication-config"/><meta content="#000" name="theme-color"/><link href="/feed.xml" rel="alternate" type="application/rss+xml"/><script async="" data-goatcounter="https://nigel.goatcounter.com/count" data-goatcounter-settings="{}" src="//gc.zgo.at/count.js"></script><title>Lamport Clocks</title><meta content="" name="description"/><meta content="Lamport Clocks" property="og:title"/><meta content="" property="og:description"/><meta content="article" property="og:type"/><meta content="en_US" property="og:locale"/><meta name="next-head-count" content="20"/><meta content="#1976d2" name="theme-color"/><link rel="preload" href="/_next/static/css/727973242bb33abd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/727973242bb33abd.css" data-n-g=""/><link rel="preload" href="/_next/static/css/2aec7fdc1f1ca4ae.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2aec7fdc1f1ca4ae.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-74c5770b086bb7e4.js" defer=""></script><script src="/_next/static/chunks/framework-0affefb16308ed4d.js" defer=""></script><script src="/_next/static/chunks/main-3c174807d57aab30.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d322b6b910bcb1f9.js" defer=""></script><script src="/_next/static/chunks/195-8c007b11d2e13cce.js" defer=""></script><script src="/_next/static/chunks/832-5cc8cdaf50734c93.js" defer=""></script><script src="/_next/static/chunks/158-6de149606ba6d2b0.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-50fd91f26d9c459a.js" defer=""></script><script src="/_next/static/gJR1sGBH6sTpWggekGZAt/_buildManifest.js" defer=""></script><script src="/_next/static/gJR1sGBH6sTpWggekGZAt/_ssgManifest.js" defer=""></script><script src="/_next/static/gJR1sGBH6sTpWggekGZAt/_middlewareManifest.js" defer=""></script><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="css "></style></head><body><div id="__next"><div class="min-h-screen"><main><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2"><a class="MuiTypography-root MuiTypography-h1 MuiLink-root MuiLink-underlineNone css-5ix4ge" href="/">Yet another SWE Blog.</a><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-s18byi"><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-rhsghg"/><div class="MuiCardContent-root css-1qw96cp"><div class="MuiBox-root css-k008qs"><div class="MuiBox-root css-i9gxme"><h1 class="MuiTypography-root MuiTypography-h3 css-lq9rk4">Lamport Clocks</h1></div><div class="MuiBox-root css-56sg73"><div class="MuiButtonBase-root MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-filledDefault css-genwvd" tabindex="0" href="/author/nigel-schuster"><div class="MuiAvatar-root MuiAvatar-circular MuiChip-avatar MuiChip-avatarMedium MuiChip-avatarColorDefault css-3i9vrz"><img alt="Nigel Schuster" src="https://media.graphassets.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6" class="MuiAvatar-img css-1hy9t21"/></div><span class="MuiChip-label MuiChip-labelMedium css-9iedg7">Nigel Schuster</span></div></div></div><p>I read Leslie Lamport&#x27;s <!-- --><a href="https://lamport.azurewebsites.net/pubs/time-clocks.pdf">Time, Clocks, and the Ordering of Events in a Distributed System<!-- --></a>. The paper is concise, yet profound and impactful!!<!-- --></p>
<!-- --><p>Content
Lamport&#x27;s paper is about the ordering of events. His main goal is to provide an viable total ordering of events across machines based on a partial ordering. He starts with baby steps, by looking at before and after as a temporal ordering in the context of events. As he points out, determining whether one event occured before or after another one is not always possible due to the spacial distance of the machines. What we instead focus on is partial ordering. This concept is about whether some event a must have occured before b given the information a system has. If we know that a occured before b, then we say &quot;a --&gt; b&quot;, otherwise &quot;a --/&gt; b&quot;. If &quot;a --/&gt; b&quot; and &quot;b --/&gt; a&quot;, then the events are concurrent.<!-- --></p>
<!-- --><p>Now, we want to be able to have a order of events that all machines agree on and that respects partial ordering. To achieve this, Lamport introduces Logical Clocks. Each time some event occurs on a machine (such as receiving a message), it increments its clock. When two machines exchange a message, then the sender attaches timestamp. The receiver sets its timestamp to be greater than the message timestamp. With this, we can assign each event on a machine a timestamp. When we propagate events to other machines in the system the receiver uses the this timestamp to determine the ordering. The name of the machine generating the timestamp serves as tie breaker.<!-- --></p>
<!-- --><p>With this simple setup we are able to introduce a total ordering in the system. Note, that this setup disregards Machine failure and lost messages (both are non trivial to solve).<!-- --></p>
<!-- --><p>Writing
The most fascinating part of the paper was not the result, but the way we obtained the result. Lamport&#x27;s style of writing is incredibly clear and concise. Reading the paper is straightforward, yet the impact is profound. This paper revolutionized how we reason about events, time and synchronization. I wish more academics write papers this well.<!-- --></p>
<!-- --><p>P.S.: You can find my presentation on this topic <!-- --><a href="https://docs.google.com/presentation/d/1ElrYSbSfCI-ROX1p0QvQN5VWhsBcNSIHTYoR9QChVUI/edit#slide=id.p3">here<!-- --></a>.<!-- --></p><p class="MuiTypography-root MuiTypography-body1 css-1bw4yx3">Published on <!-- -->2021-02-01<!-- -->.<!-- --></p></div></div><hr class="border-accent-2 mt-28 mb-24"/><div><h4 class="MuiTypography-root MuiTypography-h4 css-1f04t6y">More Stories</h4><div class="MuiMasonry-root css-g8y262"><div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-s18byi"><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-rhsghg"/><div class="MuiCardContent-root css-1qw96cp"><button class="MuiButtonBase-root MuiCardActionArea-root css-1jluznr" tabindex="0" type="button"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone css-1tqdl5x" href="/posts/systemd-frustration"><div class="MuiBox-root css-k008qs"><div class="MuiBox-root css-i9gxme"><h4 class="MuiTypography-root MuiTypography-h4 css-1f04t6y">Systemd Services are frustratingly hard to make safe</h4></div><div class="MuiBox-root css-56sg73"><div class="MuiButtonBase-root MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-filledDefault css-genwvd" tabindex="0" href="/author/nigel-schuster"><div class="MuiAvatar-root MuiAvatar-circular MuiChip-avatar MuiChip-avatarMedium MuiChip-avatarColorDefault css-3i9vrz"><img alt="Nigel Schuster" src="https://media.graphassets.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6" class="MuiAvatar-img css-1hy9t21"/></div><span class="MuiChip-label MuiChip-labelMedium css-9iedg7">Nigel Schuster</span></div></div></div><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">This article takes a dive into what it takes to set up a systemd service with the principle of least privilege.</p></a><span class="MuiCardActionArea-focusHighlight css-jo3ec3"></span></button></div></div></div><div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-s18byi"><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-rhsghg"/><div class="MuiCardContent-root css-1qw96cp"><button class="MuiButtonBase-root MuiCardActionArea-root css-1jluznr" tabindex="0" type="button"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone css-1tqdl5x" href="/posts/variants-are-powerful"><div class="MuiBox-root css-k008qs"><div class="MuiBox-root css-i9gxme"><h4 class="MuiTypography-root MuiTypography-h4 css-1f04t6y">Variants are incredibly powerful</h4></div><div class="MuiBox-root css-56sg73"><div class="MuiButtonBase-root MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-filledDefault css-genwvd" tabindex="0" href="/author/nigel-schuster"><div class="MuiAvatar-root MuiAvatar-circular MuiChip-avatar MuiChip-avatarMedium MuiChip-avatarColorDefault css-3i9vrz"><img alt="Nigel Schuster" src="https://media.graphassets.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6" class="MuiAvatar-img css-1hy9t21"/></div><span class="MuiChip-label MuiChip-labelMedium css-9iedg7">Nigel Schuster</span></div></div></div><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Variants are an incredibly powerful tool to express the state of your program!</p></a><span class="MuiCardActionArea-focusHighlight css-jo3ec3"></span></button></div></div></div></div></div></div></main></div><footer><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2"><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Built with NextJS. Find the source <!-- --><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1c0wj8h" href="https://github.com/Neitsch/neitsch.github.io">here</a>.<!-- --></p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"__typename":"Post","title":"Lamport Clocks","slug":"lamport-clocks","content":"I read Leslie Lamport's [Time, Clocks, and the Ordering of Events in a Distributed System](https://lamport.azurewebsites.net/pubs/time-clocks.pdf). The paper is concise, yet profound and impactful!!\n\nContent\nLamport's paper is about the ordering of events. His main goal is to provide an viable total ordering of events across machines based on a partial ordering. He starts with baby steps, by looking at before and after as a temporal ordering in the context of events. As he points out, determining whether one event occured before or after another one is not always possible due to the spacial distance of the machines. What we instead focus on is partial ordering. This concept is about whether some event a must have occured before b given the information a system has. If we know that a occured before b, then we say \"a --\u003e b\", otherwise \"a --/\u003e b\". If \"a --/\u003e b\" and \"b --/\u003e a\", then the events are concurrent.\n\nNow, we want to be able to have a order of events that all machines agree on and that respects partial ordering. To achieve this, Lamport introduces Logical Clocks. Each time some event occurs on a machine (such as receiving a message), it increments its clock. When two machines exchange a message, then the sender attaches timestamp. The receiver sets its timestamp to be greater than the message timestamp. With this, we can assign each event on a machine a timestamp. When we propagate events to other machines in the system the receiver uses the this timestamp to determine the ordering. The name of the machine generating the timestamp serves as tie breaker.\n\nWith this simple setup we are able to introduce a total ordering in the system. Note, that this setup disregards Machine failure and lost messages (both are non trivial to solve).\n\nWriting\nThe most fascinating part of the paper was not the result, but the way we obtained the result. Lamport's style of writing is incredibly clear and concise. Reading the paper is straightforward, yet the impact is profound. This paper revolutionized how we reason about events, time and synchronization. I wish more academics write papers this well.\n\nP.S.: You can find my presentation on this topic [here](https://docs.google.com/presentation/d/1ElrYSbSfCI-ROX1p0QvQN5VWhsBcNSIHTYoR9QChVUI/edit#slide=id.p3).","date":"2021-02-01","ogImage":null,"coverImage":null,"author":{"__typename":"Author","name":"Nigel Schuster","slug":"nigel-schuster","picture":{"__typename":"Asset","url":"https://media.graphassets.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6"}}},"moreStories":[{"__typename":"Post","title":"Systemd Services are frustratingly hard to make safe","slug":"systemd-frustration","excerpt":"This article takes a dive into what it takes to set up a systemd service with the principle of least privilege.","coverImage":null,"author":{"__typename":"Author","name":"Nigel Schuster","slug":"nigel-schuster","picture":{"__typename":"Asset","url":"https://media.graphassets.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6"}}},{"__typename":"Post","title":"Variants are incredibly powerful","slug":"variants-are-powerful","excerpt":"Variants are an incredibly powerful tool to express the state of your program!","coverImage":null,"author":{"__typename":"Author","name":"Nigel Schuster","slug":"nigel-schuster","picture":{"__typename":"Asset","url":"https://media.graphassets.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6"}}}],"__typename":"Query"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"lamport-clocks"},"buildId":"gJR1sGBH6sTpWggekGZAt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>