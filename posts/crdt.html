<!DOCTYPE html><html lang="en"><head><meta name="theme-color" content="#1976d2"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Personal blog."/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Example%20with%20**GraphCMS**.png?theme=light&amp;md=1&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg&amp;images=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9ImN1cnJlbnRDb2xvciIgdmlld0JveD0iMCAwIDMzMCA3NSIgeG1sbnM6dj0iaHR0cHM6Ly92ZWN0YS5pby9uYW5vIj48cGF0aCBkPSJNMzUuMjcgMTBMOS4wOCAyNXYzMGwxNy40Ni0xMFYzNWwtOC43MyA1VjMwbDE3LjQ2LTEwdjMwTC4zNSA3MGw4LjczIDVMNDQgNTVWNWwtOC43My01eiIvPjxwYXRoIGQ9Ik04OC40NSAyMC45MUg5NnYzMC4wNmMwIDQuODgtMS41MyA4LjYtNC41OCAxMS4xN0ExNi42IDE2LjYgMCAwMTgwLjM3IDY2Yy0yLjk0LjA3LTUuODYtLjYtOC41MS0xLjk1YTEzLjMgMTMuMyAwIDAxLTUuNjUtNS43NWw2LjU2LTRjMS41MiAyLjk2IDQuMTMgNC40NCA3Ljg0IDQuNDQgMi40NCAwIDQuMzUtLjY3IDUuNzUtMi4wMiAxLjQtMS4zNSAyLjEtMy4yNyAyLjEtNS43NnYtMy40MmMtMi4yOCAzLjItNS40NyA0LjgtOS41OCA0LjgtNC4wMS4xLTcuODctMS42Mi0xMC42LTQuN0ExNi40NCAxNi40NCAwIDAxNjQgMzYuMTVhMTYuMzkgMTYuMzkgMCAwMTQuMy0xMS40MkExMy43MyAxMy43MyAwIDAxNzguODggMjBjNC4xIDAgNy4zIDEuNiA5LjU3IDQuOHYtMy44OXptLTE0LjQgMjEuNDdhOC42NiA4LjY2IDAgMDAxMi4wNCAwIDguNTYgOC41NiAwIDAwMi4zNi02LjIyQTguNDggOC40OCAwIDAwODYuMSAzMGE4LjY2IDguNjYgMCAwMC0xMi4wMyAwIDguNDggOC40OCAwIDAwLTIuMzcgNi4xNiA4LjU2IDguNTYgMCAwMDIuMzcgNi4yMnoiLz48cGF0aCBkPSJNMTA4LjggMjUuODNhOC4xNyA4LjE3IDAgMDEzLjYtNC4zN2MxLjctLjk4IDMuNjQtMS40OCA1LjYtMS40NnY4LjczYTkuMTggOS4xOCAwIDAwLTYuMzkgMS40N2MtMS44OCAxLjI1LTIuODIgMy4zNC0yLjgyIDYuMjZWNTFIMTAxVjIwLjYzaDcuOHY1LjJ6Ii8%2BPHBhdGggZD0iTTE0NC4zIDIwLjg3aDcuN3YzMC4yNmgtNy43di0zLjU2Yy0yLjMyIDIuOTUtNS41NyA0LjQzLTkuNzcgNC40M2ExMy40NyAxMy40NyAwIDAxLTEwLjI1LTQuNjNBMTYuMTQgMTYuMTQgMCAwMTEyMC4wMSAzNmMtLjExLTQuMiAxLjQyLTguMyA0LjI3LTExLjM3QTEzLjQ3IDEzLjQ3IDAgMDExMzQuNTMgMjBjNC4yIDAgNy40NSAxLjQ4IDkuNzcgNC40M3YtMy41NnptLTE0LjI2IDIxLjI5YTcuOTMgNy45MyAwIDAwNS45MyAyLjRjMi4yMy4wNiA0LjM5LS44IDUuOTYtMi40QTguNCA4LjQgMCAwMDE0NC4zIDM2YTguNCA4LjQgMCAwMC0yLjM3LTYuMTYgOC4wMyA4LjAzIDAgMDAtNS45Ni0yLjQgNy45MyA3LjkzIDAgMDAtNS45MyAyLjRBOC40NSA4LjQ1IDAgMDAxMjcuNyAzNmE4LjQ1IDguNDUgMCAwMDIuMzQgNi4xNnoiLz48cGF0aCBkPSJNMTc0LjQgMjBjMy45NC0uMDQgNy43IDEuNjggMTAuMzIgNC43MmExNi42IDE2LjYgMCAwMTQuMjcgMTEuNTcgMTYuNiAxNi42IDAgMDEtNC4yNyAxMS41OCAxMy40MyAxMy40MyAwIDAxLTEwLjMxIDQuNzFjLTQuMiAwLTcuNDMtMS41LTkuNzEtNC41VjY0SDE1N1YyMC44OWg3Ljd2My42MmMyLjI4LTMgNS41MS00LjUgOS43LTQuNXptLTcuMzYgMjIuNTZhNy44NSA3Ljg1IDAgMDA1LjkzIDIuNDQgNy45NSA3Ljk1IDAgMDA1Ljk2LTIuNDQgOC42NCA4LjY0IDAgMDAyLjM3LTYuMjcgOC42NCA4LjY0IDAgMDAtMi4zNy02LjI3IDcuOTUgNy45NSAwIDAwLTUuOTYtMi40NCA3Ljg2IDcuODYgMCAwMC01LjkzIDIuNDQgOC43IDguNyAwIDAwLTIuMzQgNi4yNyA4LjcgOC43IDAgMDAyLjM0IDYuMjd6Ii8%2BPHBhdGggZD0iTTIxMS4yNyAxOS42NWMzLjE2LS4xIDYuMjEgMS4xNiA4LjQgMy40NiAyLjIyIDIuMzEgMy4zMyA1LjUgMy4zMyA5LjU3VjUyaC04VjMzLjY3YzAtMi4xLS41Ni0zLjctMS42OC00LjgxYTYuMDggNi4wOCAwIDAwLTQuNDgtMS42NyA2LjU3IDYuNTcgMCAwMC00Ljk4IDEuOTVjLTEuMjQgMS4zLTEuODcgMy4yNS0xLjg3IDUuODZ2MTdIMTk0VjhoOHYxNi4wNWMxLjk1LTIuOTMgNS4wNC00LjQgOS4yNy00LjR6Ii8%2BPHBhdGggZD0iTTI0My43NSA1MmMtNC40Ni4xLTguNzctMS41Ni0xMS45My00LjU4QTE1LjM4IDE1LjM4IDAgMDEyMjcgMzZhMTYuMDEgMTYuMDEgMCAwMTguNDYtMTMuODcgMTcuNDIgMTcuNDIgMCAwMTE2Ljc1LjA0IDEzLjA2IDEzLjA2IDAgMDE1LjQ3IDUuODNsLTMuNDMgMS44OWE5LjY0IDkuNjQgMCAwMC00LjEtNC4zNyAxMi42NSAxMi42NSAwIDAwLTYuNC0xLjYyIDEyLjMgMTIuMyAwIDAwLTguOSAzLjUyIDExLjUgMTEuNSAwIDAwLTMuNjMgOC41OCAxMS41IDExLjUgMCAwMDMuNjMgOC41OGMyLjcxIDIuNyA2LjYgNCAxMC40NyAzLjUgMy44OC0uNDggNy4yOC0yLjcgOS4xOC01Ljk3bDMuNSAxLjk1YTE0LjM4IDE0LjM4IDAgMDEtNS43OSA1LjggMTcuMDMgMTcuMDMgMCAwMS04LjQ2IDIuMTR6Ii8%2BPHBhdGggZD0iTTI5My41NyAyMGMzLjEtLjEyIDYuMTEgMS4wNyA4LjI4IDMuMjggMi4xIDIuMTggMy4xNSA1LjEyIDMuMTUgOC44M1Y1MWgtNC4wNVYzMi4xMWMwLTIuNjItLjY4LTQuNjUtMi4wNS02LjA4YTcuMSA3LjEgMCAwMC01LjQtMi4xNSA4IDggMCAwMC02LjEzIDIuNTFjLTEuNTYgMS42OC0yLjM0IDQuMjktMi4zNCA3Ljg0VjUxaC00LjA2VjMyLjExYzAtMi42Ni0uNjQtNC43LTEuOTItNi4xMWE2LjY5IDYuNjkgMCAwMC01LjIxLTIuMTIgOC41IDguNSAwIDAwLTYuMjMgMi41NGMtMS43IDEuNy0yLjU2IDQuMy0yLjU2IDcuOFY1MUgyNjFWMjAuNzNoNC4wNXY0LjQyQTEwLjQ3IDEwLjQ3IDAgMDEyNzQuNCAyMGM0LjQgMCA3LjUgMS44MyA5LjI5IDUuNSAyLjItMy42NyA1LjQ5LTUuNSA5Ljg5LTUuNXoiLz48cGF0aCBkPSJNMzExLjMgMjguNjVhMy42NyAzLjY3IDAgMDAxLjkzIDMuMjVjMS40NS44OCAzLjA0IDEuNTQgNC43IDEuOTZsNS41MSAxLjVjMS43OS40OCAzLjQgMS40MiA0LjY2IDIuNzJhNy4wNiA3LjA2IDAgMDExLjkgNS4xNCA3LjYgNy42IDAgMDEtMy4yNiA2LjM0Yy0yLjE2IDEuNjMtNC45NSAyLjQ0LTguMzggMi40My0yLjc2LjA4LTUuNDgtLjYtNy44NS0xLjk2YTEwLjYgMTAuNiAwIDAxLTQuNTEtNS4wN2wzLjYtMmE3LjI0IDcuMjQgMCAwMDMuMjMgMy43NWMxLjY3Ljk1IDMuNiAxLjQzIDUuNTQgMS4zOCAxLjgzLjA3IDMuNjQtLjM0IDUuMjUtMS4xOGEzLjk1IDMuOTUgMCAwMDIuMTEtMy42OWMuMDMtMS4zNC0uNy0yLjYtMS45LTMuMjlhMTcgMTcgMCAwMC00LjY4LTEuOTdsLTUuNTItMS41Yy0xLjc4LS40OC0zLjQtMS40LTQuNjgtMi42OWE2LjgyIDYuODIgMCAwMS0xLjkyLTUuMDUgNy42OSA3LjY5IDAgMDEzLjEzLTYuMjIgMTIuMTYgMTIuMTYgMCAwMTcuODYtMi41YzIuNC0uMDQgNC43OC41NCA2Ljg2IDEuN2ExMC41IDEwLjUgMCAwMTQuMzYgNC41NGwtMy41NSAxLjk1Yy0xLjIzLTIuODUtMy44LTQuMjgtNy42Ny00LjI4YTguOCA4LjggMCAwMC00Ljc0IDEuMjMgMy45MiAzLjkyIDAgMDAtMS45OSAzLjUxeiIvPjwvc3ZnPg%3D%3D"/><title>CRDTs - Sound good in theory, not in practice</title><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/5ea27e5c9dd48442fdad.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5ea27e5c9dd48442fdad.css" data-n-g=""/><link rel="preload" href="/_next/static/css/4e839cf21ff6bf076b3f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4e839cf21ff6bf076b3f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-687e794d8e071078d3f3.js"></script><script src="/_next/static/chunks/webpack-cb643fe9048b7e8a702e.js" defer=""></script><script src="/_next/static/chunks/framework-09a88f8e6a8ced89af74.js" defer=""></script><script src="/_next/static/chunks/main-68411f8a35a255e8eac5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-34dce507dcb15f3f0bf3.js" defer=""></script><script src="/_next/static/chunks/269-fa2df919e38c289c92c3.js" defer=""></script><script src="/_next/static/chunks/339-51106ae53c3b319fe376.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-e04c1c594970d495846e.js" defer=""></script><script src="/_next/static/Ni7Ld7pghWn0RJvz6l4Xa/_buildManifest.js" defer=""></script><script src="/_next/static/Ni7Ld7pghWn0RJvz6l4Xa/_ssgManifest.js" defer=""></script><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="css 1oqqzyl-MuiContainer-root 3ntvoq-MuiTypography-root-MuiLink-root bhp9pd-MuiPaper-root-MuiCard-root o69gx8-MuiCardMedia-root 46bh2p-MuiCardContent-root k008qs i9gxme 5lbw0b-MuiTypography-root 56sg73 1iz24ed-MuiChip-root 1wlk0hk-MuiAvatar-root 1pqm26d-MuiAvatar-img 6od3lo-MuiChip-label 1ld3b9g-MuiGrid-root 1tp3ba8-MuiGrid-root b6lsxj-MuiButtonBase-root-MuiCardActionArea-root uxrmkj-MuiTypography-root-MuiLink-root ahj2mt-MuiTypography-root 1v2exvi-MuiCardActionArea-focusHighlight">.css-1oqqzyl-MuiContainer-root{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-1oqqzyl-MuiContainer-root{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.css-1oqqzyl-MuiContainer-root{max-width:1200px;}}.css-3ntvoq-MuiTypography-root-MuiLink-root{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:300;font-size:6rem;line-height:1.167;letter-spacing:-0.01562em;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-bhp9pd-MuiPaper-root-MuiCard-root{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);overflow:hidden;}.css-o69gx8-MuiCardMedia-root{display:block;-webkit-background-size:cover;background-size:cover;background-repeat:no-repeat;-webkit-background-position:center;background-position:center;width:100%;object-fit:cover;}.css-46bh2p-MuiCardContent-root{padding:16px;}.css-46bh2p-MuiCardContent-root:last-child{padding-bottom:24px;}.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-i9gxme{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.css-5lbw0b-MuiTypography-root{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:2.125rem;line-height:1.235;letter-spacing:0.00735em;}.css-56sg73{-webkit-align-self:flex-end;-ms-flex-item-align:flex-end;align-self:flex-end;}.css-1iz24ed-MuiChip-root{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:0.8125rem;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:32px;color:rgba(0, 0, 0, 0.87);background-color:rgba(0, 0, 0, 0.08);border-radius:16px;white-space:nowrap;-webkit-transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;cursor:default;outline:0;-webkit-text-decoration:none;text-decoration:none;border:0;padding:0;vertical-align:middle;box-sizing:border-box;}.css-1iz24ed-MuiChip-root.Mui-disabled{opacity:0.38;pointer-events:none;}.css-1iz24ed-MuiChip-root .MuiChip-avatar{margin-left:5px;margin-right:-6px;width:24px;height:24px;color:#616161;font-size:0.75rem;}.css-1iz24ed-MuiChip-root .MuiChip-avatarColorPrimary{color:#fff;background-color:#1565c0;}.css-1iz24ed-MuiChip-root .MuiChip-avatarColorSecondary{color:#fff;background-color:#7b1fa2;}.css-1iz24ed-MuiChip-root .MuiChip-avatarSmall{margin-left:4px;margin-right:-4px;width:18px;height:18px;font-size:0.625rem;}.css-1iz24ed-MuiChip-root .MuiChip-icon{color:#616161;margin-left:5px;margin-right:-6px;}.css-1iz24ed-MuiChip-root .MuiChip-deleteIcon{-webkit-tap-highlight-color:transparent;color:rgba(0, 0, 0, 0.26);font-size:22px;cursor:pointer;margin:0 5px 0 -6px;}.css-1iz24ed-MuiChip-root .MuiChip-deleteIcon:hover{color:rgba(0, 0, 0, 0.4);}.css-1wlk0hk-MuiAvatar-root{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:40px;height:40px;font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:1.25rem;line-height:1;border-radius:50%;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.css-1pqm26d-MuiAvatar-img{width:100%;height:100%;text-align:center;object-fit:cover;color:transparent;text-indent:10000px;}.css-6od3lo-MuiChip-label{overflow:hidden;text-overflow:ellipsis;padding-left:12px;padding-right:12px;white-space:nowrap;}.css-1ld3b9g-MuiGrid-root{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-top:-40px;width:calc(100% + 40px);margin-left:-40px;}.css-1ld3b9g-MuiGrid-root>.MuiGrid-item{padding-top:40px;}.css-1ld3b9g-MuiGrid-root>.MuiGrid-item{padding-left:40px;}.css-1tp3ba8-MuiGrid-root{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:900px){.css-1tp3ba8-MuiGrid-root{-webkit-flex-basis:50%;-ms-flex-preferred-size:50%;flex-basis:50%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:50%;}}.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;display:block;text-align:inherit;width:100%;}.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root::-moz-focus-inner{border-style:none;}.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root:hover .MuiCardActionArea-focusHighlight{opacity:0.04;}@media (hover: none){.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root:hover .MuiCardActionArea-focusHighlight{opacity:0;}}.css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root.Mui-focusVisible .MuiCardActionArea-focusHighlight{opacity:0.12;}.css-uxrmkj-MuiTypography-root-MuiLink-root{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-ahj2mt-MuiTypography-root{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}.css-1v2exvi-MuiCardActionArea-focusHighlight{overflow:hidden;pointer-events:none;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;opacity:0;background-color:currentcolor;-webkit-transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}</style></head><body><div id="__next"><div class="min-h-screen"><div class="border-b bg-accent-1 border-accent-2"><div class="MuiContainer-root MuiContainer-maxWidthLg css-1oqqzyl-MuiContainer-root"><div class="py-2 text-center text-sm"></div></div></div><main><div class="MuiContainer-root MuiContainer-maxWidthLg css-1oqqzyl-MuiContainer-root"><a class="MuiTypography-root MuiTypography-h1 MuiLink-root MuiLink-underlineNone css-3ntvoq-MuiTypography-root-MuiLink-root" href="/">Nigel&#x27;s Blog.</a><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-bhp9pd-MuiPaper-root-MuiCard-root"><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-o69gx8-MuiCardMedia-root"/><div class="MuiCardContent-root css-46bh2p-MuiCardContent-root"><div class="MuiBox-root css-k008qs"><div class="MuiBox-root css-i9gxme"><h4 class="MuiTypography-root MuiTypography-h4 css-5lbw0b-MuiTypography-root">CRDTs - Sound good in theory, not in practice</h4></div><div class="MuiBox-root css-56sg73"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault css-1iz24ed-MuiChip-root"><div class="MuiAvatar-root MuiAvatar-circular MuiChip-avatar MuiChip-avatarMedium MuiChip-avatarColorDefault css-1wlk0hk-MuiAvatar-root"><img alt="Nigel Schuster" src="https://media.graphcms.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6" class="MuiAvatar-img css-1pqm26d-MuiAvatar-img"/></div><span class="MuiChip-label MuiChip-labelMedium css-6od3lo-MuiChip-label">Nigel Schuster</span></div></div></div><p>This term I did some research on conflict-free replicated datatypes (CRDTs). I will walk through what they are, why the concept is cool, but they don&#x27;t work in practice.</p>
<h1>What are CRDTs?</h1>
<p>CRDT is a data structure that propagates concurrently in a network without the need for coordination.
CRDTs are mathematically proven to not cause inconsistencies.
This property is desirable, since all partitions of a split-brain scenario can continue accepting writes.
Since machines continue functioning independently, not all writes will immediately seen by all machines.
CRDTs are used in eventually consistent systems.</p>
<p>Let&#x27;s look at a concrete example of a CRDT: a simple counter (G-Counter).
To represent a counter we actually maintain N counters, where N is the number of machines.
Each machine independently increments its counter if it receives a write.
When two machines communicate each one sends along the latest values of all counters it knows of.
A machine then takes the max of the local value and the received value for each counter.
When a user reads the value of a counter, the system returns the sum of all counters.</p>
<p>Based on similar concepts we can construct other similar data types:</p>
<ul>
<li>PN-Counter: A PN-Counter supports increments and decrements.
This is achieved by using two G-Counter, one keeps track of increments, the other one keeps track of decrements.</li>
<li>G-Set: A G-Set is a set to which elements can be added to, but not removed.
Sets are propagates by taking the union of the local set with the received set.</li>
<li>2P-Set: A 2P-Set allows for adding and removing items once.
Once a item was removed, it can not be added again.
A 2P-Set is achieved by maintaining a tombstone set.
The tombstone set indicates which elements to exclude from the return value.</li>
</ul>
<p>Another frequently used CRDT is a LWW-Set (Last-Write-Wins).
This data structure is able to handle repeated additions and removals by timestamping each change.
The timestamp is generated using vector clocks.
I personally do not like this data structure.
Vector clocks require consensus, consensus does not allow for a split-brain, and split-brain is a situation we fundamentally want to be able to handle with CRDTs.</p>
<h1>My Research</h1>
<p><a href="https://github.com/raymondxu/">Raymond</a> and I wanted to test the viability of CRDTs in practice.
For this, we took an existing application and migrated components of it to a CRDT store.</p>
<p>For this, we chose the application Vataxia, a simple social network with a Django backend. The <a href="https://github.com/buckyroberts/Vataxia-Frontend">frontend</a> and <a href="https://github.com/buckyroberts/Vataxia">backend</a> are completely decoupled. As our storage layer we chosee <a href="docs.basho.com/riak/kv/2.2.3/learn/concepts/crdts/">Riak</a>, a well established CRDT store.</p>
<p>We attempted to mirror the functionality provided by Vataxia originally. The two components we migrated are Voting and Messaging.</p>
<h2>Voting</h2>
<p>Voting in Vataxia is simple. We broke it down into a few requirements:</p>
<ul>
<li>At most one Upvote or Downvote per user and post</li>
<li>Vote removal must be possible</li>
<li>No duplicate votes</li>
<li>Only upvote OR downvote</li>
</ul>
<p>Take a minute and think about how you would implement it.
We considered the following options:</p>
<ul>
<li>Using per post Counters: Counters sound simple and intuitive.
Counters do not check whether a user casted a duplicate vote, therefore this solution is not viable.</li>
<li>Having a Set of voters per post: We considered using a G-Set, thereby eliminating the possibility of duplicate votes. This approach did not account for removing or changing one&#x27;s vote.
We also considered using a 2P-Set, but this did not allow for the sequence upvote - remove vote - upvote.
This did not work either.
A LWW-Set fulfilled almost all requirements.
Yet, it did not work, because it did not allow to enforce only having an upvote OR a downvote, since we have to maintain a seperate upvote and downvote set.</li>
<li>A map per post with key user and value vote: Each post maintans a LWW-Map. On each post the key of the map is the user ID, while the value is true or false (upvote / downvote, absence = no vote). This solution ended up being the only approach that was able to replicate the semantics of Vataxia.</li>
</ul>
<h2>Messaging</h2>
<p>In Vataxia messaging is akin to emails.
It does not allow for chats or threads.
Instead one sends individual messages that Vataxia treats completely separately.
The problems we faced here were different.
Implementing even a basic version was a lot harder.</p>
<p>We chose to use the following system.
Our system maintains messages in a LLW-Map, where the key is the timestamp and the sender, while the value is the actual message.
A G-Set maintained on the user referrences his sent and received messages.
Note, that a G-Set is unordered, therefore we must address this on the application level.
To retrieve the latest messages we order the set on the user by timestamp and then fetch the latest messages.
This process can be expensive, since we load the identifier for every single message ever sent/received into memory and sort it.</p>
<h1>Problems of CRDTs</h1>
<p>We notice, that the LWW-Map is a crucial component for both components we converted.
For me personally that is a deal breaker for CRDTs.
Since we rely so heavily on vector clocks, we rely on consensus.
CRDTs do not circumvent consensus in those cases and do not make the implementation easier.
Our implementations almost converged to the usage of a simple KeyValue-store, but with a more limited set of operations.</p>
<p>The other major criticism for CRDTs is privacy.
If we do not use vector clocks, data that is written to the store will never be deleted.
Even a 2P-Set never truly deletes data, it merely marks it as hidden.
If an intruder gains access to the set, he/she can access the tombstone set and inspect deleted data.
Those semantics are at odds with the EU &quot;right to be forgotten&quot;.</p>
<h1>Retrospective</h1>
<p>CRDTs are an interesting concept.
If an application can fit into the computational model of CRDTs excluding LWW semantics then CRDTs are a great options.
Almost no application can allow for those semantics.
The fact that deletion is often not possible is a crucial flaw.</p>
<h1>Links</h1>
<p><a href="https://github.com/raymondxu/crdt-project">Repository</a></p>
<p><a href="https://docs.google.com/presentation/d/1i-AT59MD-DwwM-h1DFZUTj3qmx4_JYlojepA6IOauZI/edit?usp=sharing">Midterm presentation</a></p>
<p><a href="https://docs.google.com/presentation/d/1i-AT59MD-DwwM-h1DFZUTj3qmx4_JYlojepA6IOauZI/edit?usp=sharing">Final presentation</a></p>
<p><a href="/uploads/crdt-paper.pdf">Final paper</a></p></div></div><hr class="border-accent-2 mt-28 mb-24"/><div><h4 class="MuiTypography-root MuiTypography-h4 css-5lbw0b-MuiTypography-root">More Stories</h4><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-5 css-1ld3b9g-MuiGrid-root"><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-6 css-1tp3ba8-MuiGrid-root"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-bhp9pd-MuiPaper-root-MuiCard-root"><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-o69gx8-MuiCardMedia-root"/><div class="MuiCardContent-root css-46bh2p-MuiCardContent-root"><button class="MuiButtonBase-root MuiCardActionArea-root css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root" tabindex="0" type="button"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone css-uxrmkj-MuiTypography-root-MuiLink-root" href="/posts/avoid-generic-types"><div class="MuiBox-root css-k008qs"><div class="MuiBox-root css-i9gxme"><h4 class="MuiTypography-root MuiTypography-h4 css-5lbw0b-MuiTypography-root">Avoiding generic types for safer code</h4></div><div class="MuiBox-root css-56sg73"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault css-1iz24ed-MuiChip-root"><div class="MuiAvatar-root MuiAvatar-circular MuiChip-avatar MuiChip-avatarMedium MuiChip-avatarColorDefault css-1wlk0hk-MuiAvatar-root"><img alt="Nigel Schuster" src="https://media.graphcms.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6" class="MuiAvatar-img css-1pqm26d-MuiAvatar-img"/></div><span class="MuiChip-label MuiChip-labelMedium css-6od3lo-MuiChip-label">Nigel Schuster</span></div></div></div><p class="MuiTypography-root MuiTypography-body1 css-ahj2mt-MuiTypography-root">Using generic types like strings made me make mistakes on several occasion. There is a better way.</p></a><span class="MuiCardActionArea-focusHighlight css-1v2exvi-MuiCardActionArea-focusHighlight"></span></button></div></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-6 css-1tp3ba8-MuiGrid-root"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 MuiCard-root css-bhp9pd-MuiPaper-root-MuiCard-root"><img class="MuiCardMedia-root MuiCardMedia-media MuiCardMedia-img css-o69gx8-MuiCardMedia-root"/><div class="MuiCardContent-root css-46bh2p-MuiCardContent-root"><button class="MuiButtonBase-root MuiCardActionArea-root css-b6lsxj-MuiButtonBase-root-MuiCardActionArea-root" tabindex="0" type="button"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone css-uxrmkj-MuiTypography-root-MuiLink-root" href="/posts/how-to-csp"><div class="MuiBox-root css-k008qs"><div class="MuiBox-root css-i9gxme"><h4 class="MuiTypography-root MuiTypography-h4 css-5lbw0b-MuiTypography-root">How to CSP</h4></div><div class="MuiBox-root css-56sg73"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault css-1iz24ed-MuiChip-root"><div class="MuiAvatar-root MuiAvatar-circular MuiChip-avatar MuiChip-avatarMedium MuiChip-avatarColorDefault css-1wlk0hk-MuiAvatar-root"><img alt="Nigel Schuster" src="https://media.graphcms.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6" class="MuiAvatar-img css-1pqm26d-MuiAvatar-img"/></div><span class="MuiChip-label MuiChip-labelMedium css-6od3lo-MuiChip-label">Nigel Schuster</span></div></div></div><p class="MuiTypography-root MuiTypography-body1 css-ahj2mt-MuiTypography-root">A good CSP can be a line of defence against XSS. It isn&#x27;t trivial to get it right though.</p></a><span class="MuiCardActionArea-focusHighlight css-1v2exvi-MuiCardActionArea-focusHighlight"></span></button></div></div></div></div></div></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="MuiContainer-root MuiContainer-maxWidthLg css-1oqqzyl-MuiContainer-root"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">Nigel Schuster&#x27;s blog.</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"__typename":"Query","moreStories":[{"__typename":"Post","author":{"__typename":"Author","name":"Nigel Schuster","picture":{"__typename":"Asset","url":"https://media.graphcms.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6"}},"coverImage":null,"excerpt":"Using generic types like strings made me make mistakes on several occasion. There is a better way.","slug":"avoid-generic-types","title":"Avoiding generic types for safer code"},{"__typename":"Post","author":{"__typename":"Author","name":"Nigel Schuster","picture":{"__typename":"Asset","url":"https://media.graphcms.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6"}},"coverImage":null,"excerpt":"A good CSP can be a line of defence against XSS. It isn't trivial to get it right though.","slug":"how-to-csp","title":"How to CSP"}],"post":{"__typename":"Post","author":{"__typename":"Author","name":"Nigel Schuster","picture":{"__typename":"Asset","url":"https://media.graphcms.com/resize=fit:crop,height:100,width:100/1bF1qLxsSbElgNK5x6t6"}},"content":"This term I did some research on conflict-free replicated datatypes (CRDTs). I will walk through what they are, why the concept is cool, but they don't work in practice.\n\n# What are CRDTs?\nCRDT is a data structure that propagates concurrently in a network without the need for coordination.\nCRDTs are mathematically proven to not cause inconsistencies.\nThis property is desirable, since all partitions of a split-brain scenario can continue accepting writes.\nSince machines continue functioning independently, not all writes will immediately seen by all machines.\nCRDTs are used in eventually consistent systems.\n\nLet's look at a concrete example of a CRDT: a simple counter (G-Counter).\nTo represent a counter we actually maintain N counters, where N is the number of machines.\nEach machine independently increments its counter if it receives a write.\nWhen two machines communicate each one sends along the latest values of all counters it knows of.\nA machine then takes the max of the local value and the received value for each counter.\nWhen a user reads the value of a counter, the system returns the sum of all counters.\n\nBased on similar concepts we can construct other similar data types:\n* PN-Counter: A PN-Counter supports increments and decrements.\nThis is achieved by using two G-Counter, one keeps track of increments, the other one keeps track of decrements.\n* G-Set: A G-Set is a set to which elements can be added to, but not removed.\nSets are propagates by taking the union of the local set with the received set.\n* 2P-Set: A 2P-Set allows for adding and removing items once.\nOnce a item was removed, it can not be added again.\nA 2P-Set is achieved by maintaining a tombstone set.\nThe tombstone set indicates which elements to exclude from the return value.\n\nAnother frequently used CRDT is a LWW-Set (Last-Write-Wins).\nThis data structure is able to handle repeated additions and removals by timestamping each change.\nThe timestamp is generated using vector clocks.\nI personally do not like this data structure.\nVector clocks require consensus, consensus does not allow for a split-brain, and split-brain is a situation we fundamentally want to be able to handle with CRDTs.\n\n# My Research\n[Raymond](https://github.com/raymondxu/) and I wanted to test the viability of CRDTs in practice.\nFor this, we took an existing application and migrated components of it to a CRDT store.\n\nFor this, we chose the application Vataxia, a simple social network with a Django backend. The [frontend](https://github.com/buckyroberts/Vataxia-Frontend) and [backend](https://github.com/buckyroberts/Vataxia) are completely decoupled. As our storage layer we chosee [Riak](docs.basho.com/riak/kv/2.2.3/learn/concepts/crdts/), a well established CRDT store.\n\nWe attempted to mirror the functionality provided by Vataxia originally. The two components we migrated are Voting and Messaging.\n\n## Voting\nVoting in Vataxia is simple. We broke it down into a few requirements:\n* At most one Upvote or Downvote per user and post\n* Vote removal must be possible\n* No duplicate votes\n* Only upvote OR downvote\n\nTake a minute and think about how you would implement it.\nWe considered the following options:\n* Using per post Counters: Counters sound simple and intuitive.\nCounters do not check whether a user casted a duplicate vote, therefore this solution is not viable.\n* Having a Set of voters per post: We considered using a G-Set, thereby eliminating the possibility of duplicate votes. This approach did not account for removing or changing one's vote.\nWe also considered using a 2P-Set, but this did not allow for the sequence upvote - remove vote - upvote.\nThis did not work either.\nA LWW-Set fulfilled almost all requirements.\nYet, it did not work, because it did not allow to enforce only having an upvote OR a downvote, since we have to maintain a seperate upvote and downvote set.\n* A map per post with key user and value vote: Each post maintans a LWW-Map. On each post the key of the map is the user ID, while the value is true or false (upvote / downvote, absence = no vote). This solution ended up being the only approach that was able to replicate the semantics of Vataxia.\n\n## Messaging\nIn Vataxia messaging is akin to emails.\nIt does not allow for chats or threads.\nInstead one sends individual messages that Vataxia treats completely separately.\nThe problems we faced here were different.\nImplementing even a basic version was a lot harder.\n\nWe chose to use the following system.\nOur system maintains messages in a LLW-Map, where the key is the timestamp and the sender, while the value is the actual message.\nA G-Set maintained on the user referrences his sent and received messages.\nNote, that a G-Set is unordered, therefore we must address this on the application level.\nTo retrieve the latest messages we order the set on the user by timestamp and then fetch the latest messages.\nThis process can be expensive, since we load the identifier for every single message ever sent/received into memory and sort it.\n\n# Problems of CRDTs\nWe notice, that the LWW-Map is a crucial component for both components we converted.\nFor me personally that is a deal breaker for CRDTs.\nSince we rely so heavily on vector clocks, we rely on consensus.\nCRDTs do not circumvent consensus in those cases and do not make the implementation easier.\nOur implementations almost converged to the usage of a simple KeyValue-store, but with a more limited set of operations.\n\nThe other major criticism for CRDTs is privacy.\nIf we do not use vector clocks, data that is written to the store will never be deleted.\nEven a 2P-Set never truly deletes data, it merely marks it as hidden.\nIf an intruder gains access to the set, he/she can access the tombstone set and inspect deleted data.\nThose semantics are at odds with the EU \"right to be forgotten\".\n\n# Retrospective\nCRDTs are an interesting concept.\nIf an application can fit into the computational model of CRDTs excluding LWW semantics then CRDTs are a great options.\nAlmost no application can allow for those semantics.\nThe fact that deletion is often not possible is a crucial flaw.\n\n# Links\n[Repository](https://github.com/raymondxu/crdt-project)\n\n[Midterm presentation](https://docs.google.com/presentation/d/1i-AT59MD-DwwM-h1DFZUTj3qmx4_JYlojepA6IOauZI/edit?usp=sharing)\n\n[Final presentation](https://docs.google.com/presentation/d/1i-AT59MD-DwwM-h1DFZUTj3qmx4_JYlojepA6IOauZI/edit?usp=sharing)\n\n[Final paper](/uploads/crdt-paper.pdf)\n","coverImage":null,"date":"2018-05-05","ogImage":null,"slug":"crdt","title":"CRDTs - Sound good in theory, not in practice"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"crdt"},"buildId":"Ni7Ld7pghWn0RJvz6l4Xa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>